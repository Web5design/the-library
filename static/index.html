<!DOCTYPE html>
<html lang='en' ng-app='the-library'>
  <head>
    <meta charset='utf-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <title>The Library</title>
    <link rel='stylesheet' href='/bootstrap/css/bootstrap.min.css'>
    <link rel='stylesheet' href='/bootstrap/css/bootstrap-responsive.min.css'>
    <link rel='stylesheet' href='/jquery-ui/css/jquery-ui-1.10.1.custom.min.css'>
    <link rel='stylesheet' href='/css/couth-core.css'>
    <style>
      body {
          padding-top: 60px;
          padding-bottom: 40px;
      }
      .sidebar-nav {
          padding: 9px 0;
      }
      @media (max-width: 980px) {
          .navbar-text.pull-right {
              float: none;
              padding-left: 5px;
              padding-right: 5px;
          }
      }
      footer {
          text-align: right;
      }
    </style>
  </head>
  <body ng-controller='CouthCtrl'>
    <!-- top bar -->
    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="brand" href="/">The Library</a>
          <div class="nav-collapse collapse">
            <!-- XXX move this to couth -->
            <div class="nav pull-right ng-cloak" ng-cloak ng-show='$couthLoading'>
              <img width="32" height="32" style="margin-top: 4px; display: none;" src="/img/loader.gif">
            </div>
            <!-- XXX move this to couth -->
            <ul class="nav pull-right ng-cloak" ng-cloak>
              <li class="divider-vertical"></li>
              <li ng-show='!$couthUser.name'>
                <div class='btn-group couth-signup'>
                  <button type='button' class="btn btn-small btn-success dropdown-toggle" data-toggle="dropdown">Sign Up</button>
                  <div class='dropdown-menu pull-right'>
                    <form class='form-inline'>
                      <fieldset ng-click='$event.stopPropagation()'>
                        <label>
                          Name
                          <input type='text' ng-model='username' required class='input-small'>
                        </label>
                        <label>
                          Password
                          <input type='password' ng-model='password' required class='input-small'>
                        </label>
                        <button type='submit' class='btn btn-success' ng-click='$couthSignupForm($event, username, password)'>Ok</button>
                      </fieldset>
                    </form>
                  </div>
                </div>
              </li>
              <li ng-show='!$couthUser.name'>
                <div class='btn-group couth-login'>
                  <button type='button' class="btn btn-small btn-primary dropdown-toggle" data-toggle="dropdown">Login</button>
                  <div class='dropdown-menu pull-right'>
                    <form class='form-inline'>
                      <fieldset ng-click='$event.stopPropagation()'>
                        <label>
                          Name
                          <input type='text' ng-model='username' required class='input-small'>
                        </label>
                        <label>
                          Password
                          <input type='password' ng-model='password' required class='input-small'>
                        </label>
                        <button type='submit' class='btn btn-success' ng-click='$couthLoginForm($event, username, password)'>Login</button>
                      </fieldset>
                    </form>
                  </div>
                </div>
              </li>
              <li ng-show='$couthUser.name'>
                <button type='button' class="btn btn-small btn-danger" ng-click='$couthLogout()'>Logout</button>
              </li>
            </ul>
<!--
            <ul class="nav">
              <li class="active"><a href="#">Home</a></li>
              <li><a href="#about">About</a></li>
              <li><a href="#contact">Contact</a></li>
            </ul>
-->
          </div>
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <!--
        Messages
        XXX move this to couth
      -->
      <div class='row-fluid ng-cloak' ng-cloak>
        <div class='alert alert-error alert-block' ng-show='$couthError'>
          <button type='button' class='close' ng-click='$couthError = false'>&times;</button>
          <h4>Error</h4>
          {{$couthError}}
        </div>
        <div class='alert alert-success alert-block' ng-show='$couthSuccess'>
          <button type='button' class='close' ng-click='$couthSuccess = false'>&times;</button>
          <h4>Success!</h4>
          {{$couthSuccess}}
        </div>
      </div>
      
      <div class="row-fluid">
        <!-- side navigation -->
        <div class="span2">
          <div class="well sidebar-nav" ng-controller='NavCtrl'>
            <ul class="nav nav-list">
              <li class="nav-header">Data</li>
              <li ng-class="pathActive('/app/specs/')"><a href="/app/specs/">Specs</a></li>
            </ul>
          </div>
        </div>
        <!-- main content -->
        <div class="span10" id='app-core' ng-view>

        </div><!--/span-->
      </div><!--/row-->

      <hr>
      <footer>
        <p>This site is maintained by Robin Berjon &lt;<a href='mailto:robin@w3.org'>robin@w3.org</a>> for W3C.</p>
      </footer>
    </div>

    <!--
      XXX
      Move most of the below should be moved inside Couth so that people don't have
      to bother loading them
    -->
    <script src='/js/jquery.min.js'></script>
    <script src='/jquery-ui/js/jquery-ui-1.10.1.custom.min.js'></script>
    <script src='/bootstrap/js/bootstrap.min.js'></script>
    <script src='/js/angular.min.js'></script>
    <script src='/js/angular-resource.min.js'></script>
    <script src='/js/core.js'></script>
    <script src='/couth/js/couth-resource-api.js'></script>
  </body>
</html>
